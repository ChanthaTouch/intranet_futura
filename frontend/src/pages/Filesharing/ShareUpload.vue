<template><div><h3 class='text-xl font-semibold mb-4'>External Filesharing</h3><form @submit.prevent='submit' class='flex gap-2 items-end mb-3'><input type='file' @change='onFile' class='border rounded p-2' /><button class='border rounded p-2'>Upload</button></form><div class='border rounded'><table class='w-full text-sm'><thead><tr class='text-left'><th class='p-2'>File</th><th>Token</th><th>Downloads</th></tr></thead><tbody><tr v-for='x in items' :key='x.id'><td class='p-2'>{{ x.original_name }}</td><td class='font-mono text-xs'>{{ x.token }}</td><td>{{ x.downloads }}</td></tr></tbody></table></div><p class='text-sm mt-2'>Download URL: <code>{{ publicBase }}/api/files/public/&lt;token&gt;</code></p></div></template><script setup>import { ref, onMounted } from 'vue'; import api from '../../api'; const file=ref(null); const items=ref([]); const publicBase=import.meta.env.VITE_API_BASE||'http://localhost:8000'; function onFile(e){ file.value=e.target.files[0] } async function submit(){ const fd=new FormData(); fd.append('file', file.value); await api.post('/api/files/share', fd, { headers:{'Content-Type':'multipart/form-data'} }); await load() } async function load(){ const { data }=await api.get('/api/files/mine'); items.value=data } onMounted(load)</script>