<template><div><h3 class='text-xl font-semibold mb-4'>Library</h3><form @submit.prevent='upload' class='flex gap-2 items-end mb-3'><select v-model='cat' class='border rounded p-2'><option :value='null'>No category</option><option v-for='c in cats' :key='c.id' :value='c.id'>{{ c.name }}</option></select><input type='file' @change='onFile' class='border rounded p-2' /><button class='border rounded p-2'>Upload</button></form><p class='text-sm text-gray-500'>List view of library items can be added here.</p></div></template><script setup>import { ref, onMounted } from 'vue'; import api from '../../api'; const cats=ref([]); const cat=ref(null); const file=ref(null); function onFile(e){ file.value=e.target.files[0] } async function load(){ const { data }=await api.get('/api/library/categories'); cats.value=data } async function upload(){ const fd=new FormData(); fd.append('file', file.value); if (cat.value) fd.append('category_id', cat.value); await api.post('/api/library/upload', fd, { headers:{'Content-Type':'multipart/form-data'} }) } onMounted(load)</script>